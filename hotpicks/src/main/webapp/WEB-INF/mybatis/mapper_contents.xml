<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.kitri.hotpicks.contents.dao.ContentsDao">
 
 	<insert id="insertSido" parameterType="java.util.List">
	<foreach collection="list" item="sido" open="INSERT ALL" close="SELECT * FROM dual">
	INTO sido(sdcode, sdname) VALUES(#{sido.sdCode}, #{sido.sdName})
	</foreach>
 	</insert>
 	
 	<insert id="insertSigunguList" parameterType="java.util.List">
 	<foreach collection="list" item="sigungu" open="INSERT ALL" close="SELECT * FROM dual">
 	INTO sigungu(sggcode,sggname,sdcode) VALUES(#{sigungu.sggCode}, #{sigungu.sggName}, #{sigungu.sdCode})
 	</foreach>
 	</insert>
 	
 	<insert id="insertSigungu" parameterType="sigunguDto">
 	INSERT INTO sigungu(sggcode,sggname,sdcode) 
 	VALUES(#{sggCode}, #{sggName}, #{sdCode})
 	</insert>

	<select id="selectSido" resultType="sidoDto">
	SELECT *
	FROM sido
	WHERE sdcode != 0
	</select>
	
	<select id="selectSigungu" parameterType="int" resultType="sigunguDto">
	SELECT *
	FROM sido s inner join sigungu g
	ON s.sdcode = g.sdcode
	WHERE s.sdcode = #{sdcode} and s.sdcode != 0
	</select>
	
	<select id="selectContentsType" resultType="contentsTypeDto">
	SELECT *
	FROM contentscate
	ORDER BY catid
	</select>
	
	<!-- insert all문으로 돌리면 열이 너무 길어 DB가 한번에 처리하지못함.(tourapi contents 200개 이하는 가능)
	 <insert id="insertApiContents" parameterType="java.util.List">
 	<foreach collection="list" item="contents" open="INSERT ALL" close="SELECT * FROM dual">
 	INTO contents(contentsid, catcode, catid, sggcode, sdcode, title, image1, image2, hit)
 	VALUES(#{contents.contentsId}, #{contents.catCode}, #{contents.catId}, #{contents.sggCode}, 
 		#{contents.sdCode}, #{contents.title}, #{contents.image1}, #{contents.image2}, #{contents.hit})
 	</foreach>
 	</insert> -->
 	
	<insert id="insertApiContents" parameterType="contentsDto">
 	INSERT INTO contents(contentsid, catcode, catid, sggcode, sdcode, title, image1, image2, hit)
 	VALUES(#{contentsId}, #{catCode}, #{catId}, #{sggCode}, 
 		#{sdCode}, #{title}, #{image1}, #{image2}, #{hit})
 	</insert>
	
 </mapper>